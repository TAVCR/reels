<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anatomía de un Reel de Venta | Estrategia Audiovisual</title>
    
    <!-- Estilos: Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Configuración de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'display': ['"Archivo Black"', 'sans-serif'],
                        'body': ['"Plus Jakarta Sans"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-neutral-200">
    <div id="root"></div>

    <!-- IMPORTANTE: Usamos type="text/babel" con data-type="module" para importaciones modernas -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'https://esm.sh/react@18.2.0?dev';
        import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client?dev';
        import * as LucideIcons from 'https://esm.sh/lucide-react@0.344.0?dev';

        // Desestructuración de iconos
        const { 
            Zap, Brain, Sparkles, Users, MousePointerClick, TrendingUp, Target, 
            Music, Mic, MonitorPlay, ShieldCheck, ChevronDown, Lightbulb, 
            MessageCircle, BookOpen, AlertTriangle, Fingerprint, FlaskConical, 
            Scale, Database, Network, ScanFace, Info, Camera, Clapperboard, 
            Type, Megaphone, Aperture, Layers, Mail, Phone, ArrowDown, Hand,
            Globe2, Cpu, BarChart3, Library, Bot, Eye, Layout, Film, X, Utensils, Cat, Watch, Heart,
            Gavel, Coins, Activity, Minimize2, Maximize2, Split, Merge, CheckCircle2, AlertOctagon
        } = LucideIcons;

        // Icono Star personalizado (no siempre exportado correctamente en todas las versiones)
        const StarIcon = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        );

        const StrategyDoc = () => {
            const [activeScenario, setActiveScenario] = useState('carismatico');
            const [expandedStep, setExpandedStep] = useState(null);
            const [expandedAlgo, setExpandedAlgo] = useState(null);
            const [expandedDiscovery, setExpandedDiscovery] = useState(false);
            const [expandedPillar, setExpandedPillar] = useState(null);
            const [showCaseStudy, setShowCaseStudy] = useState(false);
            const [showIntro, setShowIntro] = useState(false);
            const [activeCaseExample, setActiveCaseExample] = useState('cat'); 

            // --- FUNCIÓN DE AUTO-SCROLL ---
            const handleToggle = (setter, currentValue, indexToSet, event) => {
                const isOpening = currentValue !== indexToSet;
                setter(isOpening ? indexToSet : null);
                
                if (isOpening && event && event.currentTarget) {
                    const targetElement = event.currentTarget;
                    setTimeout(() => {
                        targetElement.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'nearest' });
                    }, 200);
                }
            };

            // --- VARIABLES DE ESTILO ---
            const spinClass = expandedDiscovery 
                ? 'animate-[spin_2s_linear_infinite]' 
                : 'animate-[spin_10s_linear_infinite]';
            
            const usersScaleClass = expandedDiscovery ? 'scale-110' : '';
            
            const discoveryContainerClass = "bg-white border-4 rounded-[2rem] p-8 md:p-12 flex flex-col items-center text-center relative overflow-hidden cursor-pointer transition-all duration-300 " + 
                (expandedDiscovery 
                ? 'border-yellow-400 ring-4 ring-yellow-400/30 shadow-[16px_16px_0px_0px_#000]' 
                : 'border-black shadow-[12px_12px_0px_0px_#000] hover:-translate-y-1 hover:shadow-[16px_16px_0px_0px_#000]'
                );

            const btnBase = "flex-1 p-6 font-bold text-lg flex items-center justify-center gap-3 transition-all ";
            const btnCharismaticClass = btnBase + (activeScenario === 'carismatico' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-400 hover:bg-gray-50');
            const btnMysteriousClass = btnBase + "border-t-2 md:border-t-0 md:border-l-4 border-black " + (activeScenario === 'misterioso' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-400 hover:bg-gray-50');
            const btnConceptClass = btnBase + "border-t-2 md:border-t-0 md:border-l-4 border-black " + (activeScenario === 'concepto' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-400 hover:bg-gray-50');
            const btnIaClass = btnBase + "border-t-2 md:border-t-0 md:border-l-4 border-black " + (activeScenario === 'ia' ? 'bg-yellow-400 text-black' : 'bg-white text-gray-400 hover:bg-gray-50');

            const caseBtnBase = "flex-1 py-4 px-6 rounded-xl font-bold text-xs md:text-sm uppercase tracking-wider transition-all flex items-center justify-center gap-2 border-2 ";
            const caseBtnCat = caseBtnBase + (activeCaseExample === 'cat' ? 'bg-yellow-400 text-black border-yellow-400 shadow-[4px_4px_0px_0px_rgba(250,204,21,0.5)]' : 'bg-transparent text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white');
            const caseBtnTaser = caseBtnBase + (activeCaseExample === 'taser' ? 'bg-yellow-400 text-black border-yellow-400 shadow-[4px_4px_0px_0px_rgba(250,204,21,0.5)]' : 'bg-transparent text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white');
            const caseBtnRedFlag = caseBtnBase + (activeCaseExample === 'redflag' ? 'bg-yellow-400 text-black border-yellow-400 shadow-[4px_4px_0px_0px_rgba(250,204,21,0.5)]' : 'bg-transparent text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white');


            // DATOS: PASOS TEÓRICOS
            const steps = [
                { icon: Zap, color: "text-red-600", bg: "bg-red-100", step: "01", title: "EL GANCHO", time: "0-3 seg", desc: "Interrupción de patrón.", colloquialTitle: "Concepto: Stop Scroll", colloquialText: "Tu único objetivo aquí es frenar el dedo. No vendas, no expliques. Presenta un estímulo visual o sonoro tan fuerte que el cerebro reptiliano se detenga.", nextCue: "Atención capturada." },
                { icon: Brain, color: "text-blue-600", bg: "bg-blue-100", step: "02", title: "CONTEXTO", time: "3-10 seg", desc: "Agitar el dolor o la necesidad.", colloquialTitle: "Concepto: Empatía Radical", colloquialText: "Demuestra que los entiendes. Verbaliza el problema en su mente y usa la 'Desculpabilización': no es su culpa, es del entorno.", nextCue: "Mente abierta." },
                { icon: Sparkles, color: "text-yellow-600", bg: "bg-yellow-100", step: "03", title: "SOLUCIÓN", time: "10-25 seg", desc: "El vehículo de transformación.", colloquialTitle: "Concepto: El Mecanismo", colloquialText: "Presenta el servicio como el vehículo mágico del 'Infierno' al 'Cielo'. No hables de características, habla de identidad.", nextCue: "Deseo activado." },
                { icon: Users, color: "text-green-600", bg: "bg-green-100", step: "04", title: "PRUEBA", time: "25-35 seg", desc: "Validación social (FOMO).", colloquialTitle: "Concepto: Reducción de Riesgo", colloquialText: "El cerebro teme al riesgo. Muestra que 'la manada' ya lo aprobó para matar el escepticismo.", nextCue: "Confianza ganada." },
                { icon: MousePointerClick, color: "text-purple-600", bg: "bg-purple-100", step: "05", title: "CTA", time: "Final", desc: "Orden imperativa única.", colloquialTitle: "Concepto: Liderazgo", colloquialText: "La gente necesita ser liderada. Da una instrucción física clara y única. Usa verbos de acción imperativos.", nextCue: "Acción tomada." }
            ];

            const caseStudiesData = {
                cat: {
                    title: "El Traductor de Gatos",
                    subtitle: "Vendiéndole a la inseguridad del dueño",
                    icon: Cat,
                    steps: [
                        { step: "01", phase: "EL GANCHO", title: "La Mirada Asesina", visual: "Zoom in lento a los ojos de un gato que mira fijamente a cámara.", audio: "Música de terror. VOZ: 'Él sabe lo que hiciste...'", directorNote: "Paranoia cómica." },
                        { step: "02", phase: "CONTEXTO", title: "La Duda Existencial", visual: "El dueño preguntándole al gato '¿Me quieres?'", audio: "VOZ: '¿Te odia? ¿O solo quiere atún?'", directorNote: "Agitar el dolor de la indiferencia." },
                        { step: "03", phase: "SOLUCIÓN", title: "La Revelación", visual: "App escaneando al gato. Burbuja: 'Tu corte de pelo es lamentable'.", audio: "SFX Tecnológico. VOZ: 'Decodifica su desprecio.'", directorNote: "Confirmar que el gato es un patán." },
                        { step: "04", phase: "PRUEBA", title: "La Verdad Duele", visual: "Usuarios llorando mirando sus teléfonos.", audio: "VOZ: 'Más de 10,000 esclavos ya saben la verdad.'", directorNote: "Prueba social irónica." },
                        { step: "05", phase: "CTA", title: "Descubre tu Destino", visual: "Gato tirando un vaso de agua.", audio: "VOZ: 'Descárgala antes de que tire el vaso.'", directorNote: "Urgencia inmediata." }
                    ]
                },
                taser: {
                    title: "Reloj Taser 'DoItNow'",
                    subtitle: "Productividad extrema basada en el miedo",
                    icon: Watch,
                    steps: [
                        { step: "01", phase: "EL GANCHO", title: "El Despertar Violento", visual: "Tipo durmiendo... ¡ZAP! Salta de la silla.", audio: "SFX Electricidad + Grito.", directorNote: "Slapstick comedy." },
                        { step: "02", phase: "CONTEXTO", title: "El Cerebro de Mono", visual: "Tipo viendo videos de monos en vez de trabajar.", audio: "VOZ: '¿Procastinando? Necesitas un castigo.'", directorNote: "Identificación inmediata." },
                        { step: "03", phase: "SOLUCIÓN", title: "Disciplina de 50 Voltios", visual: "Primer plano del reloj activándose.", audio: "Música épica. VOZ: 'Te mete 50 voltios de motivación.'", directorNote: "Seriedad absurda." },
                        { step: "04", phase: "PRUEBA", title: "La Novela en 2 Días", visual: "Escritor con tic nervioso tecleando rápido.", audio: "TESTIMONIO: 'Escribí mi tesis en una tarde.'", directorNote: "Beneficio real, costo ridículo." },
                        { step: "05", phase: "CTA", title: "Compra tu Miedo", visual: "Reloj cargando descarga (luz roja).", audio: "VOZ: 'Compra ya. O prepárate.'", directorNote: "Urgencia basada en dolor físico." }
                    ]
                },
                redflag: {
                    title: "Gafas AR 'Red Flag'",
                    subtitle: "Realidad Aumentada para citas",
                    icon: Heart,
                    steps: [
                        { step: "01", phase: "EL GANCHO", title: "El Príncipe Azul...", visual: "Chico guapo en bar. Letrero NEÓN sobre él: 'SIGUE A SU EX'.", audio: "Música romántica cortada con alarma.", directorNote: "Contraste expectativa/realidad." },
                        { step: "02", phase: "CONTEXTO", title: "El Amor es Ciego", visual: "Montaje de la chica pagando cenas y llorando.", audio: "VOZ: 'Tu corazón es ciego. Tu cuenta bancaria no.'", directorNote: "Agitar el costo emocional." },
                        { step: "03", phase: "SOLUCIÓN", title: "El Escáner de Almas", visual: "Interfaz estilo Iron Man. 'Mentiras: 98%'.", audio: "Sonidos digitales. VOZ: 'Analiza micro-gestos al instante.'", directorNote: "Tecnología vs Soledad." },
                        { step: "04", phase: "PRUEBA", title: "Esquivando Balas", visual: "Chica esquivando tipo estilo Matrix.", audio: "VOZ: 'Únete a las que no pierden tiempo.'", directorNote: "Metáfora visual literal." },
                        { step: "05", phase: "CTA", title: "Salva tu Futuro", visual: "Chica se quita gafas y mira a cámara.", audio: "VOZ: 'Tu futuro terapeuta te lo agradecerá.'", directorNote: "Beneficio secundario." }
                    ]
                }
            };
            
            const currentCase = caseStudiesData[activeCaseExample];

            const andromedaPillars = [
                { icon: Globe2, title: "Social vs Interest Graph", subtitle: "Adiós 'Amigos'", content: "Meta ya no prioriza a tus amigos (Social Graph). Ahora prioriza tus intereses (Interest Graph). Tu competencia es MrBeast, no tu vecino." },
                { icon: Scale, title: "Democracia Viral", subtitle: "Reset diario", content: "Tus seguidores importan poco. Cada video empieza de cero. Una cuenta nueva puede tener 10M de vistas si retiene, y una grande 100 si aburre." },
                { icon: Cpu, title: "Buckets de Prueba", subtitle: "La prueba de fuego", content: "Tu video se muestra a 200 desconocidos primero. Si no lo ven, muere ahí. El contenido debe sobrevivir sin contexto previo." }
            ];

            const algoSteps = [
                { icon: TrendingUp, color: "text-red-600", bg: "bg-red-100", title: "El Mito del Alcance Orgánico", desc: "El alcance orgánico es < 5%.", expandedTitle: "Tu seguidor ya no es tuyo", expandedText: "Meta funciona como TikTok: prioriza la retención. Solo muestra tu post a un 3% de tus fans; si no reaccionan, muere. Pagar es necesario para romper esa barrera." },
                { icon: Target, color: "text-blue-600", bg: "bg-blue-100", title: "Pauta = Compra de Datos", desc: "Pagas por velocidad de aprendizaje.", expandedTitle: "Acelerando el fracaso", expandedText: "Al pagar, compras 'Data Points'. Le das gasolina al algoritmo para que se equivoque rápido con 900 personas y encuentre a las 100 correctas en horas, no en meses." }
            ];

            const sources = [
                { title: "Economía del Comportamiento", author: "Daniel Kahneman", desc: "Aversión a la Pérdida.", color: "bg-orange-100 text-orange-800" },
                { title: "Psicología de la Influencia", author: "Robert Cialdini", desc: "Prueba Social.", color: "bg-green-100 text-green-800" },
                { title: "Meta Engineering", author: "Meta AI Blog", desc: "Discovery Engine Docs.", color: "bg-blue-100 text-blue-800" },
                { title: "Neurociencia Cognitiva", author: "Investigación S.A.R.", desc: "Filtros de atención.", color: "bg-purple-100 text-purple-800" }
            ];

            const caseStudyContainerClass = "bg-gray-900 border-4 border-black shadow-[12px_12px_0px_0px_#000] relative overflow-hidden cursor-pointer transition-all duration-500 group " + 
                (showCaseStudy ? 'rounded-[2.5rem] p-6 md:p-12' : 'rounded-3xl p-6 md:p-8 hover:-translate-y-1 hover:shadow-[14px_14px_0px_0px_#000]');

            return (
                <div className="min-h-screen font-body text-gray-900 selection:bg-yellow-300 pb-20 overflow-x-hidden">
                
                {/* HEADER */}
                <header className="bg-yellow-400 border-b-4 border-black py-12 px-6 md:p-16 text-center relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-black to-transparent pointer-events-none"></div>
                    <div className="relative z-10 max-w-5xl mx-auto">
                    <div className="inline-block bg-black text-yellow-400 px-4 py-2 font-bold tracking-widest text-xs md:text-sm mb-6 transform -rotate-2 uppercase shadow-[4px_4px_0px_0px_rgba(255,255,255,0.5)]">
                        Documento de Producción Interna
                    </div>
                    <h1 className="font-display text-4xl sm:text-5xl md:text-7xl text-black mb-6 leading-tight tracking-tight">
                        ANATOMÍA DE UN<br/>REEL DE VENTA
                    </h1>
                    <p className="text-lg md:text-2xl font-bold text-black/80 max-w-3xl mx-auto leading-snug">
                        Manual de Estructura Narrativa y Psicología de Retención
                    </p>
                    </div>
                </header>

                <main className="max-w-7xl mx-auto px-4 py-10 md:p-12 space-y-20 md:space-y-32">
                    
                    {/* SECCIÓN 1: ESTRUCTURA */}
                    <section>
                        <div className="flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6 mb-8">
                            <div className="flex items-center gap-4">
                                <div className="bg-black text-white w-12 h-12 md:w-16 md:h-16 flex items-center justify-center font-display text-2xl md:text-4xl rounded-xl shadow-[4px_4px_0px_0px_rgba(250,204,21,1)] shrink-0">1</div>
                                <h2 className="font-display text-3xl md:text-5xl uppercase italic tracking-tighter leading-none">La Estructura</h2>
                            </div>
                            <button onClick={() => setShowIntro(!showIntro)} className="text-black text-sm md:text-base font-bold flex items-center gap-2 animate-bounce bg-yellow-400 px-4 py-2 rounded-full border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] w-fit hover:bg-yellow-300 transition-all hover:scale-105 active:scale-95">
                                <Hand size={20} className="stroke-[3px]" />
                                {showIntro ? "Cerrar intro" : "Ver concepto"}
                            </button>
                        </div>

                        {/* Intro Desplegable */}
                        <div className={"overflow-hidden transition-all duration-700 ease-in-out " + (showIntro ? 'max-h-[2000px] opacity-100 mb-12' : 'max-h-0 opacity-0 mb-0')}>
                            <div className="bg-black text-white p-8 md:p-12 rounded-[2rem] border-4 border-black relative overflow-hidden">
                                <Brain size={200} className="absolute top-0 right-0 p-8 opacity-10 pointer-events-none" />
                                <div className="relative z-10 max-w-3xl">
                                    <div className="inline-flex items-center gap-2 text-yellow-400 border border-yellow-400/30 bg-yellow-400/10 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-widest mb-6"><AlertTriangle size={14} /> Manifiesto de Atención</div>
                                    <h3 className="font-display text-3xl md:text-5xl text-yellow-400 mb-6 leading-tight">¿Por qué esto?</h3>
                                    <p className="text-lg md:text-2xl leading-relaxed mb-6 text-gray-200 font-medium">En un feed infinito, <strong>tu contenido es un intruso</strong>. Si intentas vender como en TV ("Hola, somos X"), serás ignorado en 0.3 segundos.</p>
                                </div>
                            </div>
                        </div>

                        {/* Grid de Pasos */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 items-start">
                            {steps.map((item, idx) => {
                                const isExpanded = expandedStep === idx;
                                const cardClass = "relative p-5 rounded-2xl border-4 border-black cursor-pointer transition-all duration-300 group overflow-hidden " + (isExpanded ? 'bg-black shadow-[8px_8px_0px_0px_#000] -translate-y-1 z-10 md:col-span-2 md:row-span-2 ring-4 ring-yellow-400' : 'bg-white shadow-[6px_6px_0px_0px_#000] hover:-translate-y-1 hover:shadow-[8px_8px_0px_0px_#000]');
                                return (
                                    <div key={idx} onClick={(e) => handleToggle(setExpandedStep, expandedStep, idx, e)} className={cardClass}>
                                        <div className="flex justify-between items-start mb-4 relative z-10">
                                            <div className={"p-3 rounded-xl border-2 border-black transition-transform " + (isExpanded ? 'bg-yellow-400 text-black border-yellow-400' : item.bg + " " + item.color + " group-hover:scale-110")}><item.icon size={24} strokeWidth={2.5} /></div>
                                            <span className={"font-display text-3xl md:text-4xl " + (isExpanded ? 'text-yellow-400' : 'text-black')}>{item.step}</span>
                                        </div>
                                        <h3 className={"font-display text-xl mb-2 leading-tight relative z-10 " + (isExpanded ? 'text-white text-2xl mb-4' : 'text-black')}>{item.title}</h3>
                                        {!isExpanded && <div className="relative z-10"><div className="text-xs font-bold bg-gray-100 text-gray-800 border border-gray-300 inline-block px-2 py-1 rounded-lg mb-3">{item.time}</div><p className="text-sm text-gray-600 leading-snug font-medium mb-4">{item.desc}</p><div className="pt-3 border-t-2 border-gray-100 flex items-center justify-center gap-2 text-blue-600 font-bold"><span className="text-[10px] font-black uppercase tracking-widest">Ver Concepto</span><ChevronDown size={16} className="stroke-[3px]" /></div></div>}
                                        {isExpanded && <div className="animate-in fade-in slide-in-from-bottom-4 duration-300 relative z-10"><div className="bg-gray-900 rounded-xl p-4 mb-4 border-2 border-gray-800"><div className="flex items-center gap-2 text-yellow-400 text-xs font-bold uppercase tracking-widest mb-2"><Brain size={14} /> {item.colloquialTitle}</div><p className="text-gray-200 text-base leading-relaxed">{item.colloquialText}</p></div>{idx < 4 && <div className="text-right mt-4"><span className="text-xs font-bold text-gray-400 uppercase tracking-wider hover:text-yellow-400 transition-colors">Siguiente: {item.nextCue} &rarr;</span></div>}</div>}
                                    </div>
                                );
                            })}
                        </div>
                    </section>

                    {/* SECCIÓN 1.5: LABORATORIO DE CASOS (Oculto/Desplegable) */}
                    <section className="relative" onClick={(e) => { if (!showCaseStudy) { setShowCaseStudy(true); setTimeout(() => e.currentTarget.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' }), 150); }}}>
                        <div className={caseStudyContainerClass}>
                            <div className="absolute inset-0 bg-[radial-gradient(#333_1px,transparent_1px)] [background-size:16px_16px] opacity-20 pointer-events-none"></div>
                            <div className="relative z-10">
                                <div className="flex flex-col md:flex-row items-center justify-between gap-6">
                                    <div className="flex items-center gap-6 w-full md:w-auto">
                                        <div className={"p-4 rounded-2xl text-black shrink-0 transition-colors " + (showCaseStudy ? 'bg-yellow-400' : 'bg-white border-2 border-black')}><Layout size={32} strokeWidth={2.5} /></div>
                                        <div className="text-left flex-1"><span className={"font-bold tracking-widest uppercase text-sm mb-1 block " + (showCaseStudy ? 'text-yellow-400' : 'text-gray-400')}>Laboratorio de Ideas</span><h3 className="font-display text-2xl md:text-4xl text-white leading-none">CASOS PRÁCTICOS</h3>{!showCaseStudy && <p className="text-gray-400 text-sm mt-2 md:hidden">Toca para desplegar</p>}</div>
                                    </div>
                                    <button onClick={(e) => { e.stopPropagation(); setShowCaseStudy(!showCaseStudy); }} className={"p-3 rounded-full border-2 transition-all " + (showCaseStudy ? 'rotate-180 bg-yellow-400 border-black text-black' : 'bg-transparent border-gray-600 text-white hover:bg-gray-800')}><ChevronDown size={32} /></button>
                                </div>
                                <div className={"grid transition-all duration-700 ease-in-out " + (showCaseStudy ? 'grid-rows-[1fr] opacity-100 mt-12 pt-12 border-t border-gray-700' : 'grid-rows-[0fr] opacity-0')}>
                                    <div className="overflow-hidden">
                                        <div className="flex flex-col lg:flex-row lg:items-end justify-between gap-8 mb-12">
                                            <div>
                                                <p className="text-gray-300 text-lg leading-relaxed max-w-2xl mb-6">Selecciona un caso para ver el guion:</p>
                                                <div className="flex flex-wrap gap-4">
                                                    <button onClick={() => setActiveCaseExample('cat')} className={caseBtnCat}><Cat size={18} /> Gatos</button>
                                                    <button onClick={() => setActiveCaseExample('taser')} className={caseBtnTaser}><Watch size={18} /> Taser</button>
                                                    <button onClick={() => setActiveCaseExample('redflag')} className={caseBtnRedFlag}><Heart size={18} /> Red Flag</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div className="space-y-0">
                                            {currentCase.steps.map((ex, idx) => (
                                                <div key={idx} className="relative pb-16 last:pb-0">
                                                    {idx !== currentCase.steps.length - 1 && <div className="absolute left-1/2 top-14 bottom-0 w-1 bg-gray-800 -translate-x-1/2 z-0"></div>}
                                                    <div className="relative z-10 flex justify-center mb-6"><div className="w-16 h-16 bg-black border-4 border-yellow-400 rounded-full flex items-center justify-center text-yellow-400 font-display text-2xl shadow-[0_0_20px_rgba(250,204,21,0.4)]">{ex.step}</div></div>
                                                    <div className="bg-black/80 rounded-2xl p-6 md:p-8 border border-gray-700 hover:border-yellow-400/50 transition-colors relative z-10 shadow-lg">
                                                        <div className="flex flex-col md:flex-row md:items-center gap-4 mb-6"><span className="text-yellow-400 font-bold text-xs tracking-widest uppercase bg-yellow-400/10 px-2 py-1 rounded border border-yellow-400/20 w-fit">{ex.phase}</span><h4 className="text-white font-display text-2xl md:text-3xl leading-none">{ex.title}</h4></div>
                                                        <div className="grid md:grid-cols-2 gap-8 mb-6">
                                                            <div className="space-y-2"><div className="flex items-center gap-2 text-blue-400 text-xs font-bold uppercase mb-1"><Eye size={16}/> Visual</div><p className="text-gray-200 text-base leading-relaxed font-medium border-l-2 border-blue-500/30 pl-4">{ex.visual}</p></div>
                                                            <div className="space-y-2"><div className="flex items-center gap-2 text-green-400 text-xs font-bold uppercase mb-1"><Music size={16}/> Audio</div><p className="text-gray-300 text-base leading-relaxed italic border-l-2 border-green-500/30 pl-4">"{ex.audio}"</p></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* SECCIÓN 2: ALGORITMO */}
                    <section className="grid md:grid-cols-2 gap-12 items-start">
                        <div>
                            <div className="flex items-center gap-4 mb-8"><div className="bg-black text-white w-12 h-12 flex items-center justify-center font-display text-2xl rounded-xl shadow-[4px_4px_0px_0px_rgba(250,204,21,1)] shrink-0">2</div><h2 className="font-display text-3xl md:text-5xl uppercase italic tracking-tighter leading-none">Andrómeda</h2></div>
                            <div className="mb-10 space-y-4">
                                {andromedaPillars.map((pillar, index) => {
                                    const isOpen = expandedPillar === index;
                                    return (
                                        <div key={index} onClick={() => setExpandedPillar(isOpen ? null : index)} className={"border-2 border-black rounded-xl overflow-hidden cursor-pointer transition-all " + (isOpen ? 'bg-black shadow-[6px_6px_0px_0px_#000] ring-1 ring-yellow-400' : 'bg-white shadow-[2px_2px_0px_0px_#000] hover:shadow-[4px_4px_0px_0px_#000]')}>
                                            <div className={"p-4 flex items-center justify-between " + (isOpen ? 'bg-black text-white' : 'bg-white text-black')}><div className="flex items-center gap-4"><div className={"p-2 rounded-lg " + (isOpen ? 'bg-gray-900 text-yellow-400' : 'bg-yellow-100 text-yellow-700')}><pillar.icon size={20} /></div><div><h4 className={"font-bold text-lg leading-none " + (isOpen ? 'text-white' : 'text-black')}>{pillar.title}</h4>{!isOpen && <p className="text-xs text-gray-500 mt-1 font-medium">{pillar.subtitle}</p>}</div></div><ChevronDown size={20} className={"transition-transform " + (isOpen ? 'rotate-180 text-yellow-400' : 'text-gray-400')} /></div>
                                            {isOpen && <div className="p-5 pt-0 border-t-2 border-gray-800 bg-black"><p className="text-sm text-yellow-400 font-bold uppercase tracking-widest mb-2 mt-4">{pillar.subtitle}</p><p className="text-gray-200 text-base leading-relaxed">{pillar.content}</p></div>}
                                        </div>
                                    )
                                })}
                            </div>
                        </div>
                        <div onClick={() => setExpandedDiscovery(!expandedDiscovery)} className={discoveryContainerClass}>
                            <div className="absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] opacity-50 -z-10"></div>
                            <div className="inline-flex items-center gap-3 text-black text-sm font-bold px-4 py-2 rounded-full border-2 border-black mb-8 bg-yellow-400 shadow-[2px_2px_0px_0px_#000]"><ShieldCheck size={16} /> Discovery Engine</div>
                            <div className="w-40 h-40 bg-white rounded-full flex items-center justify-center mb-8 relative border-4 border-black shadow-[4px_4px_0px_0px_#000]"><div className={"absolute w-full h-full border-[6px] border-black rounded-full border-t-yellow-400 border-r-transparent " + spinClass}></div><Users size={64} className={"text-black transition-transform " + usersScaleClass} /></div>
                            <h3 className="font-display text-3xl mb-4 leading-tight">Segmentación por Intención</h3>
                            {!expandedDiscovery ? <div className="animate-in fade-in w-full"><p className="text-gray-500 text-base max-w-md mx-auto mb-6">El algoritmo busca "clones" de quien ve el video.</p><div className="flex items-center justify-center text-xs font-bold text-white bg-blue-600 px-4 py-2 rounded-full w-fit mx-auto border-2 border-black animate-pulse">CÓMO FUNCIONA</div></div> : <div className="animate-in fade-in w-full"><div className="bg-gray-900 text-left rounded-xl p-6 border-2 border-gray-800 shadow-xl"><div className="flex items-center gap-2 text-yellow-400 text-xs font-bold uppercase tracking-widest mb-3"><ScanFace size={16} /> Advantage+</div><p className="text-gray-200 text-base mb-3">Segmentar manualmente es matar el rendimiento.</p><p className="text-gray-400 text-sm">Deja que la IA encuentre a los "Gemelos Digitales".</p></div></div>}
                        </div>
                    </section>

                    {/* --- SECCIÓN 3: DINÁMICA DE SUBASTA (ACTUALIZADA) --- */}
                    <section className="bg-black text-white p-6 md:p-10 rounded-[2.5rem] border-4 border-yellow-400 shadow-[12px_12px_0px_0px_rgba(250,204,21,0.2)]">
                        <div className="flex flex-col md:flex-row items-start md:items-center gap-4 mb-10">
                            <div className="bg-yellow-400 text-black w-12 h-12 flex items-center justify-center font-display text-2xl rounded-xl shadow-[4px_4px_0px_0px_#fff] shrink-0">3</div>
                            <div>
                                <h2 className="font-display text-3xl md:text-5xl uppercase italic tracking-tighter leading-none mb-2">Dinámica de Subasta</h2>
                                <p className="text-gray-400 font-bold text-lg md:text-xl">Por qué "Divide y Vencerás" es mentira en Meta</p>
                            </div>
                        </div>

                        {/* INTRODUCCIÓN TÉCNICA */}
                        <div className="bg-gray-900/50 p-6 rounded-2xl border border-gray-700 mb-12">
                            <p className="text-lg text-gray-300 leading-relaxed mb-0">
                                Meta no vende espacios fijos. Gestiona un mercado bursátil de atención. Ganar la impresión no depende solo de quién pone más dinero, sino de quién ofrece el mayor <strong>Valor Total</strong>.
                            </p>
                        </div>

                        <div className="grid lg:grid-cols-12 gap-8 mb-12">
                            {/* FÓRMULA VISUAL */}
                            <div className="lg:col-span-12">
                                <div className="bg-black p-6 md:p-8 rounded-3xl border-2 border-yellow-400/30 relative overflow-hidden flex flex-col items-center">
                                    <div className="absolute top-0 left-0 bg-yellow-400 text-black font-bold text-xs px-3 py-1 rounded-br-lg uppercase tracking-widest">
                                        El Algoritmo de Decisión
                                    </div>
                                    <div className="flex flex-col md:flex-row items-center justify-center gap-6 md:gap-8 text-center mt-4 w-full">
                                        <div className="flex flex-col items-center gap-3 p-4 bg-green-900/20 rounded-2xl border border-green-500/30 w-full md:w-1/3">
                                            <Coins size={32} className="text-green-400" />
                                            <div>
                                                <span className="font-bold text-sm uppercase tracking-wider text-green-400 block">Puja (Bid)</span>
                                                <span className="text-[10px] text-gray-500">Tu Presupuesto</span>
                                            </div>
                                        </div>
                                        <div className="text-gray-600 font-display text-3xl">×</div>
                                        <div className="flex flex-col items-center gap-3 p-4 bg-blue-900/20 rounded-2xl border border-blue-500/30 w-full md:w-1/3">
                                            <Activity size={32} className="text-blue-400" />
                                            <div>
                                                <span className="font-bold text-sm uppercase tracking-wider text-blue-400 block">Probabilidad</span>
                                                <span className="text-[10px] text-gray-500">Historial de Cuenta</span>
                                            </div>
                                        </div>
                                        <div className="text-gray-600 font-display text-3xl">+</div>
                                        <div className="flex flex-col items-center gap-3 p-4 bg-purple-900/20 rounded-2xl border border-purple-500/30 w-full md:w-1/3">
                                            <div className="relative"><StarIcon /><div className="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"></div></div>
                                            <div>
                                                <span className="font-bold text-sm uppercase tracking-wider text-purple-400 block">Calidad</span>
                                                <span className="text-[10px] text-gray-500">Relevancia Anuncio</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="mt-8 pt-6 border-t border-gray-800 w-full text-center">
                                        <span className="font-display text-3xl text-yellow-400 tracking-tight">= VALOR TOTAL</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="grid lg:grid-cols-2 gap-8 items-stretch">
                            {/* COLUMNA 1: LA TRAMPA DE LA FRAGMENTACIÓN */}
                            <div className="bg-red-950/20 p-8 rounded-3xl border border-red-900/50 flex flex-col">
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="p-2 bg-red-500/10 rounded-lg text-red-500"><Minimize2 size={24} /></div>
                                    <h3 className="font-display text-2xl text-white">El Error Técnico</h3>
                                </div>
                                <div className="space-y-6 flex-1">
                                    <div className="relative pl-6 border-l-2 border-red-800">
                                        <strong className="text-red-400 text-sm font-bold uppercase tracking-widest block mb-1">1. Signal Loss (Pérdida de Señal)</strong>
                                        <p className="text-gray-400 text-sm leading-relaxed">
                                            El algoritmo necesita ~50 conversiones/semana para salir de la "Fase de Aprendizaje". Si divides el presupuesto en dos, ninguna campaña alcanza la data necesaria. Ambas quedan "tontas".
                                        </p>
                                    </div>
                                    <div className="relative pl-6 border-l-2 border-red-800">
                                        <strong className="text-red-400 text-sm font-bold uppercase tracking-widest block mb-1">2. Canibalización</strong>
                                        <p className="text-gray-400 text-sm leading-relaxed">
                                            Si el Artista y el Local pautan por separado al mismo público, <strong>compiten contra sí mismos</strong>. Inflas tu propio costo (CPM) artificialmente.
                                        </p>
                                    </div>
                                    <div className="mt-6 bg-black/40 p-4 rounded-xl text-center border border-red-900/30">
                                        <span className="text-gray-500 text-xs uppercase font-bold tracking-widest">Matemática simple</span>
                                        <div className="text-red-500 font-display text-3xl mt-1">$5 + $5 &lt; $10</div>
                                        <p className="text-gray-400 text-xs mt-2">Dos campañas débiles pierden ante una fuerte.</p>
                                    </div>
                                </div>
                            </div>

                            {/* COLUMNA 2: LA EXCEPCIÓN VÁLIDA (CREATIVOS) */}
                            <div className="bg-green-950/20 p-8 rounded-3xl border border-green-900/50 flex flex-col">
                                <div className="flex items-center gap-3 mb-6">
                                    <div className="p-2 bg-green-500/10 rounded-lg text-green-500"><Split size={24} /></div>
                                    <h3 className="font-display text-2xl text-white">La Única Excepción</h3>
                                </div>
                                <div className="space-y-6 flex-1">
                                    <p className="text-gray-300 text-sm leading-relaxed">
                                        Es válido tener múltiples piezas (videos, fotos) corriendo simultáneamente, <strong>PERO</strong> bajo reglas estrictas:
                                    </p>
                                    <div className="bg-green-900/10 p-4 rounded-xl border border-green-500/20">
                                        <div className="flex items-center justify-between mb-4">
                                            <span className="text-green-400 font-bold text-sm uppercase">Escenario de Escalamiento</span>
                                            <CheckCircle2 size={16} className="text-green-500" />
                                        </div>
                                        <ul className="space-y-4">
                                            <li className="flex gap-3 text-sm text-gray-300">
                                                <Merge size={16} className="shrink-0 text-green-600 mt-0.5" />
                                                <span>
                                                    <strong>Misma Campaña (CBO):</strong> Todos los creativos deben vivir dentro de UNA sola campaña con "Presupuesto Advantage+".
                                                </span>
                                            </li>
                                            <li className="flex gap-3 text-sm text-gray-300">
                                                <TrendingUp size={16} className="shrink-0 text-green-600 mt-0.5" />
                                                <span>
                                                    <strong>Presupuesto Robusto:</strong> Solo divide si tienes suficiente dinero para que CADA creativo reciba al menos 2,000 colones diarios.
                                                </span>
                                            </li>
                                        </ul>
                                    </div>
                                    <div className="mt-auto pt-4 border-t border-gray-800">
                                        <div className="flex items-center gap-2 text-yellow-400 text-xs font-bold uppercase tracking-widest mb-1">
                                            <Lightbulb size={14} /> Regla de Oro
                                        </div>
                                        <p className="text-white font-bold text-sm">
                                            "Centraliza el presupuesto, diversifica el contenido."
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* SECCIÓN 4: ADAPTACIÓN CREATIVA (Tabs) */}
                    <section>
                        <div className="flex items-center gap-4 md:gap-6 mb-8">
                            <div className="bg-black text-white w-12 h-12 flex items-center justify-center font-display text-2xl rounded-xl shadow-[4px_4px_0px_0px_rgba(250,204,21,1)] shrink-0">4</div>
                            <h2 className="font-display text-3xl md:text-5xl uppercase italic tracking-tighter leading-none">Adaptación</h2>
                        </div>
                        
                        <div className="bg-white rounded-[2rem] border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] overflow-hidden">
                            <div className="flex flex-col md:flex-row border-b-4 border-black">
                                <button onClick={() => setActiveScenario('carismatico')} className={btnCharismaticClass}><Mic size={24} /> Carismático</button>
                                <button onClick={() => setActiveScenario('misterioso')} className={btnMysteriousClass}><Music size={24} /> Misterioso</button>
                                <button onClick={() => setActiveScenario('concepto')} className={btnConceptClass}><MonitorPlay size={24} /> Gráfico</button>
                                <button onClick={() => setActiveScenario('ia')} className={btnIaClass}><Bot size={24} /> Avatar IA</button>
                            </div>
                            <div className="p-6 md:p-12 bg-gray-50/50 min-h-[400px]">
                                {activeScenario === 'carismatico' && <div className="animate-in fade-in space-y-6"><h3 className="font-display text-3xl">Estilo "Talking Head"</h3><p className="bg-blue-100 p-4 rounded-lg border-l-4 border-blue-600 text-blue-900">Nota: Necesitamos energía alta. Si el artista es aburrido, usa otro formato.</p></div>}
                                {activeScenario === 'misterioso' && <div className="animate-in fade-in space-y-6"><h3 className="font-display text-3xl">Estilo "Cinemático"</h3><p className="bg-purple-100 p-4 rounded-lg border-l-4 border-purple-600 text-purple-900">Nota: Vende la atmósfera ("Vibe"). No necesitamos verle la cara todo el tiempo.</p></div>}
                                {activeScenario === 'concepto' && <div className="animate-in fade-in space-y-6"><h3 className="font-display text-3xl">Estilo "Kinetic Type"</h3><p className="bg-red-100 p-4 rounded-lg border-l-4 border-red-600 text-red-900">Nota: Botón de pánico cuando no hay material de video.</p></div>}
                                {activeScenario === 'ia' && <div className="animate-in fade-in space-y-6"><h3 className="font-display text-3xl">Estilo "Sintético"</h3><p className="bg-green-100 p-4 rounded-lg border-l-4 border-green-600 text-green-900">Nota: Ideal para escalar sin talento humano disponible. Abraza la estética IA.</p></div>}
                            </div>
                        </div>
                    </section>

                </main>

                <footer className="bg-black text-white p-10 text-center border-t-4 border-yellow-400">
                    <div className="flex justify-center items-center gap-3 mb-4 text-yellow-400"><Sparkles size={24} /><h4 className="text-2xl font-black tracking-widest">ESTRATEGIA 2025</h4></div>
                    <p className="text-gray-500 text-sm">Documento confidencial - Antologías</p>
                </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<StrategyDoc />);
    </script>
</body>
</html>
